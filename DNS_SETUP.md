# Настройка DNS для домена crm.lead-schem.ru

## Необходимые DNS записи:

### A записи:
- `crm.lead-schem.ru` → IP адрес вашего сервера
- `www.crm.lead-schem.ru` → IP адрес вашего сервера

### CNAME записи (опционально):
- `www.crm.lead-schem.ru` → `crm.lead-schem.ru`

## Настройка DNS в Timeweb:

### Шаг 1: Вход в панель управления
1. Перейдите на https://timeweb.com
2. Войдите в личный кабинет
3. Найдите домен `lead-schem.ru`

### Шаг 2: Управление DNS
1. Нажмите на домен `lead-schem.ru`
2. Перейдите в раздел "DNS-записи" или "Управление DNS"
3. Убедитесь, что NS записи настроены правильно:
   - ns1.timeweb.ru
   - ns2.timeweb.ru
   - ns3.timeweb.org
   - ns4.timeweb.org

### Шаг 3: Добавление A записей
1. Нажмите "Добавить запись"
2. Выберите тип записи: **A**
3. Добавьте первую запись:
   - **Имя**: `crm`
   - **Значение**: IP адрес вашего сервера
   - **TTL**: 3600 (или по умолчанию)
4. Добавьте вторую запись:
   - **Имя**: `www.crm`
   - **Значение**: IP адрес вашего сервера
   - **TTL**: 3600 (или по умолчанию)

### Шаг 4: Добавление CNAME записи (опционально)
1. Нажмите "Добавить запись"
2. Выберите тип записи: **CNAME**
3. Добавьте запись:
   - **Имя**: `www.crm`
   - **Значение**: `crm.lead-schem.ru`
   - **TTL**: 3600 (или по умолчанию)

### Шаг 5: Сохранение изменений
1. Нажмите "Сохранить" или "Применить"
2. Дождитесь подтверждения сохранения

## Альтернативный способ через API Timeweb:

Если у вас есть доступ к API Timeweb, можно использовать автоматическую настройку:

```bash
# Пример настройки через API (требует API ключ)
curl -X POST "https://api.timeweb.ru/dns/lead-schem.ru/records" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "A",
    "name": "crm",
    "value": "YOUR_SERVER_IP",
    "ttl": 3600
  }'
```

## Проверка настройки:

### Через командную строку:
```bash
# Проверка DNS записи
nslookup crm.lead-schem.ru

# Проверка с разных DNS серверов
dig crm.lead-schem.ru @8.8.8.8
dig crm.lead-schem.ru @1.1.1.1

# Проверка доступности
curl -I http://crm.lead-schem.ru
```

### Через онлайн сервисы:
- https://dnschecker.org - проверка DNS записей
- https://www.whatsmydns.net - проверка распространения DNS
- https://mxtoolbox.com - комплексная проверка домена

## Временные рамки:
- **Локальные изменения**: 5-15 минут
- **Полное распространение**: до 24 часов
- **Рекомендуемое время ожидания**: 30-60 минут

## Важные замечания:
- DNS изменения могут распространяться до 24 часов
- Убедитесь, что порты 80 и 443 открыты на сервере
- Проверьте настройки файрвола
- Timeweb может иметь дополнительные настройки безопасности
- При проблемах обратитесь в поддержку Timeweb

## Контакты поддержки Timeweb:
- **Телефон**: 8-800-555-0123
- **Email**: support@timeweb.ru
- **Чат**: доступен в личном кабинете
- **Документация**: https://timeweb.com/help

## Следующие шаги после настройки DNS:
1. Дождитесь распространения DNS записей (30-60 минут)
2. Проверьте готовность: `scripts\check_readiness.bat lead-schem.ru`
3. Запустите систему: `docker-compose -f docker-compose-production.yml --env-file .env.production up -d`
4. Получите SSL сертификаты: `scripts\get_ssl_cert.bat lead-schem.ru`
