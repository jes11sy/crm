# Настройка DNS в Timeweb для домена lead-schem.ru

## Важные данные:
- **Домен**: lead-schem.ru
- **Поддомен**: crm.lead-schem.ru
- **IP адрес сервера**: 5.167.145.171
- **NS серверы**: ns1.timeweb.ru, ns2.timeweb.ru, ns3.timeweb.org, ns4.timeweb.org

## Пошаговая инструкция:

### Шаг 1: Вход в панель управления Timeweb
1. Откройте браузер и перейдите на https://timeweb.com
2. Нажмите "Войти" в правом верхнем углу
3. Введите логин и пароль от вашего аккаунта
4. Нажмите "Войти"

### Шаг 2: Поиск домена
1. В личном кабинете найдите раздел "Домены" или "Мои домены"
2. Найдите домен `lead-schem.ru` в списке
3. Нажмите на название домена или кнопку "Управление"

### Шаг 3: Переход к DNS записям
1. В меню управления доменом найдите раздел "DNS-записи" или "Управление DNS"
2. Нажмите на этот раздел
3. Убедитесь, что NS записи настроены правильно:
   - ns1.timeweb.ru
   - ns2.timeweb.ru
   - ns3.timeweb.org
   - ns4.timeweb.org

### Шаг 4: Добавление A записи для crm
1. Нажмите кнопку "Добавить запись" или "+"
2. Выберите тип записи: **A**
3. Заполните поля:
   - **Имя**: `crm`
   - **Значение**: `5.167.145.171`
   - **TTL**: `3600` (или оставьте по умолчанию)
4. Нажмите "Сохранить" или "Добавить"

### Шаг 5: Добавление A записи для www.crm
1. Снова нажмите "Добавить запись"
2. Выберите тип записи: **A**
3. Заполните поля:
   - **Имя**: `www.crm`
   - **Значение**: `5.167.145.171`
   - **TTL**: `3600` (или оставьте по умолчанию)
4. Нажмите "Сохранить" или "Добавить"

### Шаг 6: Проверка записей
После добавления записей вы должны увидеть в списке:
```
Тип | Имя    | Значение        | TTL
A   | crm    | 5.167.145.171   | 3600
A   | www.crm| 5.167.145.171   | 3600
```

### Шаг 7: Сохранение изменений
1. Убедитесь, что все записи добавлены правильно
2. Нажмите "Сохранить изменения" или "Применить"
3. Дождитесь подтверждения сохранения

## Альтернативный способ через API Timeweb

Если у вас есть API ключ Timeweb, можно настроить DNS автоматически:

```bash
# Получение API ключа в панели Timeweb
# Раздел: Настройки → API

# Добавление A записи для crm
curl -X POST "https://api.timeweb.ru/dns/lead-schem.ru/records" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "A",
    "name": "crm",
    "value": "5.167.145.171",
    "ttl": 3600
  }'

# Добавление A записи для www.crm
curl -X POST "https://api.timeweb.ru/dns/lead-schem.ru/records" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "A",
    "name": "www.crm",
    "value": "5.167.145.171",
    "ttl": 3600
  }'
```

## Проверка настройки

### Через командную строку:
```bash
# Проверка DNS записи
nslookup crm.lead-schem.ru

# Ожидаемый результат:
# crm.lead-schem.ru -> 5.167.145.171
```

### Через онлайн сервисы:
- https://dnschecker.org - введите `crm.lead-schem.ru`
- https://www.whatsmydns.net - проверка распространения DNS
- https://mxtoolbox.com - комплексная проверка

## Временные рамки:
- **Локальные изменения**: 5-15 минут
- **Полное распространение**: до 24 часов
- **Рекомендуемое время ожидания**: 30-60 минут

## Возможные проблемы и решения:

### Проблема: DNS записи не обновляются
**Решение**: 
- Проверьте правильность NS записей
- Обратитесь в поддержку Timeweb
- Попробуйте очистить DNS кэш: `ipconfig /flushdns`

### Проблема: Домен не доступен
**Решение**:
- Убедитесь, что порты 80 и 443 открыты на сервере
- Проверьте настройки файрвола
- Убедитесь, что сервер запущен

### Проблема: SSL сертификат не работает
**Решение**:
- Дождитесь полного распространения DNS (24 часа)
- Проверьте настройки nginx
- Убедитесь, что домен правильно настроен в конфигурации

## Контакты поддержки Timeweb:
- **Телефон**: 8-800-555-0123
- **Email**: support@timeweb.ru
- **Чат**: доступен в личном кабинете
- **Документация**: https://timeweb.com/help

## Следующие шаги после настройки DNS:

1. **Подождите 30-60 минут** для распространения DNS записей

2. **Проверьте готовность**:
   ```bash
   scripts\check_readiness.bat lead-schem.ru
   ```

3. **Запустите систему**:
   ```bash
   docker-compose -f docker-compose-production.yml --env-file env.production up -d
   ```

4. **Получите SSL сертификаты**:
   ```bash
   scripts\get_ssl_cert.bat lead-schem.ru
   ```

5. **Проверьте работу**:
   - Откройте https://crm.lead-schem.ru
   - Убедитесь, что SSL работает
   - Проверьте все функции CRM

## Мониторинг:
После запуска система будет доступна по адресу:
- **Основной URL**: https://crm.lead-schem.ru
- **Мониторинг**: https://crm.lead-schem.ru/monitoring/
- **Документация API**: https://crm.lead-schem.ru/api/docs/ 